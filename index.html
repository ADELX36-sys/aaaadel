<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>لوحة البرامج والألعاب</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      background: #f0f0f0;
      color: #222;
      text-align: center;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    input, button, select {
      padding: 8px;
      margin: 5px;
      border-radius: 6px;
      border: 1px solid #aaa;
    }
    button {
      background: #0078ff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #005fcc;
    }
    .hidden { display: none; }
    .dark {
      background: #222;
      color: #eee;
    }
    .dark input, .dark button, .dark select {
      background: #333;
      color: #fff;
      border: 1px solid #666;
    }
    .list {
      text-align: left;
      margin: 10px 0;
    }
    .list div {
      padding: 5px;
      border-bottom: 1px solid #ccc;
    }
    .admin-panel {
      margin-top: 20px;
      background: #fafafa;
      padding: 10px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>📌 تسجيل الدخول</h2>
    <div id="loginSection">
      <input type="text" id="username" placeholder="اسم المستخدم"><br>
      <input type="password" id="password" placeholder="كلمة المرور"><br>
      <button onclick="login()">تسجيل الدخول</button>
      <button onclick="toggleRole()">تسجيل كـ Admin / Guest</button>
    </div>

    <div id="mainSection" class="hidden">
      <h3>أهلاً <span id="userRole"></span> 👋</h3>
      <button onclick="toggleTheme()">🌙 تبديل الألوان</button>
      <button onclick="logout()">🚪 تسجيل الخروج</button>
      <p id="clock"></p>

      <h3>🖥️ البرامج</h3>
      <div id="programList" class="list"></div>
      <h3>🎮 الألعاب</h3>
      <div id="gameList" class="list"></div>

      <div id="adminPanel" class="admin-panel hidden">
        <h3>لوحة الإدارة ⚙️</h3>
        <h4>إضافة برنامج/لعبة</h4>
        <select id="itemType">
          <option value="program">برنامج</option>
          <option value="game">لعبة</option>
        </select>
        <input type="text" id="itemName" placeholder="الاسم">
        <input type="text" id="itemLink" placeholder="الرابط">
        <button onclick="addItem()">➕ إضافة</button>

        <h4>إدارة الحسابات</h4>
        <div id="userList" class="list"></div>
      </div>
    </div>
  </div>

  <script>
    let users = JSON.parse(localStorage.getItem("users")) || [
      {username:"admin", password:"1234", role:"admin"},
      {username:"guest", password:"0000", role:"guest"}
    ];
    let items = JSON.parse(localStorage.getItem("items")) || {programs:[], games:[]};
    let currentUser = null;

    function saveData() {
      localStorage.setItem("users", JSON.stringify(users));
      localStorage.setItem("items", JSON.stringify(items));
    }

    function login() {
      let user = document.getElementById("username").value;
      let pass = document.getElementById("password").value;
      let found = users.find(u=>u.username===user && u.password===pass);
      if(found){
        currentUser = found;
        document.getElementById("loginSection").classList.add("hidden");
        document.getElementById("mainSection").classList.remove("hidden");
        document.getElementById("userRole").textContent = found.role;
        if(found.role==="admin") document.getElementById("adminPanel").classList.remove("hidden");
        loadItems();
        loadUsers();
      } else {
        alert("❌ بيانات خاطئة");
      }
    }

    function toggleRole() {
      alert("✨ الحسابات المتاحة:\nAdmin: admin / 1234\nGuest: guest / 0000");
    }

    function logout(){
      currentUser=null;
      document.getElementById("loginSection").classList.remove("hidden");
      document.getElementById("mainSection").classList.add("hidden");
    }

    function toggleTheme(){
      document.body.classList.toggle("dark");
    }

    function addItem(){
      let type = document.getElementById("itemType").value;
      let name = document.getElementById("itemName").value;
      let link = document.getElementById("itemLink").value;
      if(type==="program") items.programs.push({name,link});
      else items.games.push({name,link});
      saveData();
      loadItems();
    }

    function loadItems(){
      let programList=document.getElementById("programList");
      let gameList=document.getElementById("gameList");
      programList.innerHTML="";
      gameList.innerHTML="";
      items.programs.forEach((p,i)=>{
        programList.innerHTML+=`<div>${p.name} - <a href="${p.link}" target="_blank">تحميل</a></div>`;
      });
      items.games.forEach((g,i)=>{
        gameList.innerHTML+=`<div>${g.name} - <a href="${g.link}" target="_blank">تحميل</a></div>`;
      });
    }

    function loadUsers(){
      let userList=document.getElementById("userList");
      userList.innerHTML="";
      users.forEach((u,i)=>{
        userList.innerHTML+=`<div>
          👤 ${u.username} (${u.role}) 
          <button onclick="changePass(${i})">🔑 تغيير الباسورد</button>
          <button onclick="deleteUser(${i})">🗑️ حذف</button>
        </div>`;
      });
    }

    function changePass(i){
      let newPass = prompt("ادخل باسورد جديد لـ "+users[i].username);
      if(newPass){
        users[i].password=newPass;
        saveData();
        alert("تم التحديث ✔");
      }
    }

    function deleteUser(i){
      if(confirm("هل تريد حذف "+users[i].username+" ؟")){
        users.splice(i,1);
        saveData();
        loadUsers();
      }
    }

    setInterval(()=>{
      document.getElementById("clock").textContent = new Date().toLocaleTimeString();
    },1000);
  </script>
</body>
</html>
